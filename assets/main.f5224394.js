var E=Object.defineProperty,I=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var R=(i,t,e)=>t in i?E(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,x=(i,t)=>{for(var e in t||(t={}))L.call(t,e)&&R(i,e,t[e]);if(M)for(var e of M(t))O.call(t,e)&&R(i,e,t[e]);return i},k=(i,t)=>I(i,H(t));var b=(i,t,e)=>{if(!t.has(i))throw TypeError("Cannot "+e)};var o=(i,t,e)=>(b(i,t,"read from private field"),e?e.call(i):t.get(i)),r=(i,t,e)=>{if(t.has(i))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(i):t.set(i,e)},d=(i,t,e,n)=>(b(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e);var w=(i,t,e)=>(b(i,t,"access private method"),e);function W(i,t){"requestIdleCallback"in window?requestIdleCallback(i,t==null?{}:{timeout:t}):setTimeout(i,1)}function T(){const i=document.documentElement,t=document.body;return{top:0,left:0,right:i.clientWidth||t.clientWidth,width:i.clientWidth||t.clientWidth,bottom:i.clientHeight||t.clientHeight,height:i.clientHeight||t.clientHeight}}function $(){return{top:window.visualViewport.offsetTop,right:window.visualViewport.offsetLeft+window.visualViewport.width,bottom:window.visualViewport.offsetTop+window.visualViewport.height,left:window.visualViewport.offsetLeft,width:window.visualViewport.width,height:window.visualViewport.height}}function g(i){let t="px";if(i!="0"&&!/px$/.test(i)){if(!/%$/.test(i))throw new Error("Only px or % is allowed in rootMargin");t="%"}return{type:t,value:parseFloat(i)}}function q(i){let[t,e,n,h]=i.split(/\s+/);return e==null&&(e=t),n==null&&(n=t),h==null&&(h=e),[g(t),g(e),g(n),g(h)]}function C(i,t){var e=t.map(({type:h,value:V},y)=>h==="px"?V:V*(y%2?i.width:i.height)/100);const n={top:i.top-e[0],right:i.right+e[1],bottom:i.bottom+e[2],left:i.left-e[3],width:0,height:0};return n.width=n.right-n.left,n.height=n.bottom-n.top,n}function j(i){const t=C($(),i),e=T();return[e.top-t.top,t.right-e.right,t.bottom-e.bottom,e.left-t.left].map(h=>`${h}px`).join(" ")}var a,u,s,c,l,p,v,f,m;class B{constructor(t,e){r(this,p);r(this,f);r(this,a,void 0);r(this,u,void 0);r(this,s,void 0);r(this,c,void 0);r(this,l,new Set);d(this,a,t),d(this,u,e||{}),d(this,c,q(o(this,u).rootMargin||"0")),d(this,s,w(this,p,v).call(this)),window.visualViewport.addEventListener("resize",w(this,f,m).bind(this)),window.visualViewport.addEventListener("scroll",w(this,f,m).bind(this))}get root(){return o(this,s).root}get rootMargin(){return o(this,s).rootMargin}get thresholds(){return o(this,s).thresholds}disconnect(){o(this,l).clear(),o(this,s).disconnect()}observe(t){o(this,l).add(t),o(this,s).observe(t)}takeRecords(){return o(this,s).takeRecords()}unobserve(t){o(this,l).delete(t),o(this,s).unobserve(t)}}a=new WeakMap,u=new WeakMap,s=new WeakMap,c=new WeakMap,l=new WeakMap,p=new WeakSet,v=function(){return new IntersectionObserver(o(this,a),k(x({},o(this,u)),{rootMargin:j(o(this,c))}))},f=new WeakSet,m=function(){W(()=>{o(this,a).call(this,o(this,s).takeRecords(),this),o(this,s).disconnect(),d(this,s,w(this,p,v).call(this)),o(this,l).forEach(t=>o(this,s).observe(t))},50)};export{B as VisualIntersectionObserver};
